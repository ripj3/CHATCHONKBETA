# ChatChonk Backend Requirements
# Last updated: June 2025 - Fixed httpx dependency conflict

# === FastAPI Ecosystem ===
fastapi==0.104.1
uvicorn[standard]==0.23.2
pydantic==2.4.2
pydantic-settings==2.10.0
python-multipart==0.0.6  # For file uploads
python-dotenv==1.0.0
email-validator==2.0.0
fastapi-pagination==0.12.8
python-json-logger==2.0.7  # Structured logging for production

# === Supabase Client ===
supabase==1.2.0
# postgrest-py==0.10.6  # Included as dependency of supabase

# === HTTP Client for Cloudflare KV ===
httpx==0.24.1  # Compatible with supabase 1.2.0 (requires httpx>=0.24.0,<0.25.0)

# === AI/ML Libraries ===
# HuggingFace
transformers>=4.35.0,<5.0.0
datasets>=2.14.0,<3.0.0
accelerate>=0.24.0,<1.0.0
sentence-transformers>=2.2.0,<3.0.0
# OpenAI
openai>=1.3.0,<2.0.0
# Anthropic
anthropic>=0.5.0,<1.0.0
# General ML
scikit-learn>=1.3.0,<2.0.0
numpy>=1.24.0,<2.0.0
pandas>=2.0.0,<3.0.0

# === File Processing ===
python-magic==0.4.27  # For file type detection
aiofiles==23.2.1  # Async file operations
zipfile38==0.0.3  # Enhanced ZIP handling
rarfile==4.1  # RAR support
py7zr==0.20.5  # 7zip support

# === Document Processing ===
pypdf==3.17.0  # PDF processing
python-docx==0.8.11  # DOCX processing
markdown==3.5  # Markdown processing
beautifulsoup4==4.12.2  # HTML parsing
lxml==4.9.3  # XML processing
pyyaml==6.0.1  # YAML processing
jinja2==3.1.2  # Template rendering

# === Audio/Video Processing ===
ffmpeg-python==0.2.0  # FFmpeg wrapper
whisper==1.1.10  # OpenAI Whisper for audio transcription
pydub==0.25.1  # Audio processing

# === Image Processing ===
pillow==10.1.0  # Image processing
opencv-python-headless==4.8.1.78  # OpenCV for image analysis
pytesseract==0.3.10  # OCR for images

# === Text Processing and NLP ===
nltk==3.8.1
spacy==3.7.2
langchain==0.0.335  # Framework for LLM applications
langchain-community==0.0.10  # Community extensions

# === HTTP Clients and Utilities ===
# httpx is specified above - compatible with supabase requirements
requests==2.31.0  # Sync HTTP client
websockets==12.0  # WebSocket support
tenacity==8.2.3  # Retry logic
tqdm==4.66.1  # Progress bars

# === Discord Integration ===
discord.py==2.3.2  # Discord bot library

# === Testing and Development ===
pytest==7.4.3
pytest-asyncio==0.21.1
black==23.10.1  # Code formatting
isort==5.12.0  # Import sorting
mypy==1.6.1  # Type checking
ruff==0.1.3  # Fast linter

# === Production Server Tools ===
gunicorn==21.2.0  # WSGI HTTP Server
watchfiles==0.21.0  # File watching

# === Monitoring and Logging ===
prometheus-fastapi-instrumentator==6.1.0  # Metrics
loguru==0.7.2  # Better logging
sentry-sdk==1.32.0  # Error tracking

# === Development Dependencies ===
transformers>=4.35.0,<5.0.0
datasets>=2.14.0,<3.0.0
accelerate>=0.24.0,<1.0.0
sentence-transformers>=2.2.0,<3.0.0
openai>=1.3.0,<2.0.0
anthropic>=0.5.0,<1.0.0
scikit-learn>=1.3.0,<2.0.0
numpy>=1.24.0,<2.0.0
pandas>=2.0.0,<3.0.0

# === File Processing ===
python-magic==0.4.27
zipfile38==0.0.3
rarfile==4.1
py7zr==0.20.5

# === Document Processing ===
pypdf==3.17.0
python-docx==0.8.11
markdown==3.5
beautifulsoup4==4.12.2
lxml==4.9.3
pyyaml==6.0.1
jinja2==3.1.2
